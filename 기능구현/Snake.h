//Snake.h
#include <iostream>
#include "Board.h"
using namespace std;

class Snake{
public:
  int item_totalNum = 3; //item이 랜덤하게 총 3개 생성됨
  int item_spawntime = 6; //item 좌표가 갱신되는 초 단위(6초)
  int gate_spawntime = 10;  //gate 좌표가 갱신되는 초 단위(10초)
  int set_x, set_y;  //snake 좌표
  int min_len = 3;  //snake 최소 길이
  int max_len = 12;   //snake 최대 길이
  vector <pair<int, int>> body;  //snake body 좌표를 담을 벡터
  int item_pos[3][4] = {0};  //item_pos = [[y좌표, x좌표, 생성된 시간, 아이템유형], ...]
  int item_growth = 0; //growth item의 개수
  int itemType = 0;  //growth, posion item 구분하는 변수
  char item_shape[2] = {'5', '6'};
  int h, w;  //map의 세로, 가로 크기
  int gate[2][3];  //gate=[[y,x,생성된 시간] ...]

  char map[4][32][63] = {
    {
    "99999999999999999999999999999999999999999999999999999999999999",
    "92111111111111111111111111111111111111111111111111111111111129",
    "91000000000000000000000000000000000000000000000000000000000019",
    "91000000000000000000000000000000000000000000000000000000000019",
    "91000000000000000000000000000000000000000000000000000000000019",
    "91000000000000000000000000000000000000000000000000000000000019",
    "91000000000000000000000000000000000000000000000000000000000019",
    "91000000000000000000000000000000000000000000000000000000000019",
    "91000000000000000000000000000000000000000000000000000000000019",
    "91000000000000000000000000000000000000000000000000000000000019",
    "91000000000000000000000000000000000000000000000000000000000019",
    "91000000000000000000000000000000000000000000000000000000000019",
    "91000000000000000000000000000000000000000000000000000000000019",
    "91000000000000000000000000000000000000000000000000000000000019",
    "91000000000000000000000000000000000000000000000000000000000019",
    "91000000000000000000000000000000000000000000000000000000000019",
    "91000000000000000000000000000000000000000000000000000000000019",
    "91000000000000000000000000000000000000000000000000000000000019",
    "91000000000000000000000000000000000000000000000000000000000019",
    "91000000000000000000000000000000000000000000000000000000000019",
    "91000000000000000000000000000000000000000000000000000000000019",
    "91000000000000000000000000000000000000000000000000000000000019",
    "91000000000000000000000000000000000000000000000000000000000019",
    "91000000000000000000000000000000000000000000000000000000000019",
    "91000000000000000000000000000000000000000000000000000000000019",
    "91000000000000000000000000000000000000000000000000000000000019",
    "91000000000000000000000000000000000000000000000000000000000019",
    "91000000000000000000000000000000000000000000000000000000000019",
    "91000000000000000000000000000000000000000000000000000000000019",
    "91000000000000000000000000000000000000000000000000000000000019",
    "92111111111111111111111111111111111111111111111111111111111129",
    "99999999999999999999999999999999999999999999999999999999999999"
    },
    {
      "99999999999999999999999999999999999999999999999999999999999999",
      "92111111111111111111111111111111111111111111111111111111111129",
      "91000000000000000000000000000000000000000000000000000000000019",
      "91000000000000000000000000000000000000000000000000000000000019",
      "91000000000000000000000000000000000000000000000000000000000019",
      "91000000000000000000000000000011000000000000000000000000000019",
      "91000000000000000000000000000011000000000000000000000000000019",
      "91000000000000000000000000000011000000000000000000000000000019",
      "91000000000000000000000000000011000000000000000000000000000019",
      "91000000000000000000000000000011000000000000000000000000000019",
      "91000000000000000000000000000011000000000000000000000000000019",
      "91000000000000000000000000000011000000000000000000000000000019",
      "91000000000000000000000000000011000000000000000000000000000019",
      "91000000000001111111111111111111111111111111111100000000000019",
      "91000000000000000000000000000011000000000000000000000000000019",
      "91000000000000000000000000000011000000000000000000000000000019",
      "91000000000000000000000000000011000000000000000000000000000019",
      "91000000000000000000000000000011000000000000000000000000000019",
      "91000000000000000000000000000011000000000000000000000000000019",
      "91000000000000000000000000000011000000000000000000000000000019",
      "91000000000000000000000000000011000000000000000000000000000019",
      "91000000000000000000000000000011000000000000000000000000000019",
      "91000000000000000000000000000011000000000000000000000000000019",
      "91000000000000000000000000000011000000000000000000000000000019",
      "91000000000000000000000000000011000000000000000000000000000019",
      "91000000000000000000000000000000000000000000000000000000000019",
      "91000000000000000000000000000000000000000000000000000000000019",
      "91000000000000000000000000000000000000000000000000000000000019",
      "91000000000000000000000000000000000000000000000000000000000019",
      "91000000000000000000000000000000000000000000000000000000000019",
      "92111111111111111111111111111111111111111111111111111111111129",
      "99999999999999999999999999999999999999999999999999999999999999"
    },

    {
      "99999999999999999999999999999999999999999999999999999999999999",
    "92111111111111111111111111111111111111111111111111111111111129",
    "91000000000000000000000000000000000000000000000000000000000019",
    "91000000000000000000000000000000000000000000000000000000000019",
    "91000000011111111110000000000000000000000001111111111000000019",
    "91000000000000000000000000000000000000000000000000000000000019",
    "91000000000000000000000000111111111100000000000000000000000019",
    "91000000000000000000000000000000000000000000000000000000000019",
    "91000000000000000000000000000000000000000000000000000000000019",
    "91000000011111111110000000000000000000000001111111111000000019",
    "91000000000000000000000000000000000000000000000000000000000019",
    "91000000000000000000000000000000000000000000000000000000000019",
    "91000000000000000000000000111111111100000000000000000000000019",
    "91000000000000000000000000000000000000000000000000000000000019",
    "91000000000000000000000000000000000000000000000000000000000019",
    "91000000011111111110000000000000000000000001111111111000000019",
    "91000000000000000000000000000000000000000000000000000000000019",
    "91000000000000000000000000000000000000000000000000000000000019",
    "91000000000000000000000000111111111100000000000000000000000019",
    "91000000000000000000000000000000000000000000000000000000000019",
    "91000000000000000000000000000000000000000000000000000000000019",
    "91000000011111111110000000000000000000000001111111111000000019",
    "91000000000000000000000000000000000000000000000000000000000019",
    "91000000000000000000000000000000000000000000000000000000000019",
    "91000000000000000000000000111111111100000000000000000000000019",
    "91000000000000000000000000000000000000000000000000000000000019",
    "91000000000000000000000000000000000000000000000000000000000019",
    "91000000011111111110000000000000000000000001111111111000000019",
    "91000000000000000000000000000000000000000000000000000000000019",
    "91000000000000000000000000000000000000000000000000000000000019",
    "92111111111111111111111111111111111111111111111111111111111129",
    "99999999999999999999999999999999999999999999999999999999999999"
  },

    {
      "99999999999999999999999999999999999999999999999999999999999999",
      "92111111111111111111111111111111111111111111111111111111111129",
      "91000000000000000000000000000000000000000000000000000000000019",
      "91000000000000000000000000000000000000000000000000000000000019",
      "91000000000000000000011000000000000000000000000000000000000019",
      "91000000000000000000110000000000000000000000000000000000000019",
      "91000000000000000001100000000000000000000000000000000000000019",
      "91000000000000000011000000000000000000000000000000000000000019",
      "91000000000000000110000000000000000000000000000000000000000019",
      "91000000000000001100000000000000000000000000000000000000000019",
      "91000000000000011000000000000000000000000000000000000000000019",
      "91000000000000110000000000000000000000000000000000000000000019",
      "91000000000001111111111111111111111111111111111000000000000019",
      "91000000000000000000000000000000000000000000110000000000000019",
      "91000000000000000000000000000000000000000001100000000000000019",
      "91000000000000000000000000000000000000000011000000000000000019",
      "91000000000000000000000000000000000000001100000000000000000019",
      "91000000000000000000000000000000000000011000000000000000000019",
      "91000000000000000000000000000000000000110000000000000000000019",
      "91000000000000000000000000000000000001100000000000000000000019",
      "91000000000000000000000000000000000011000000000000000000000019",
      "91000000000000000000000000000000000110000000000000000000000019",
      "91000000000000000000000000000000001100000000000000000000000019",
      "91000000000000000000000000000000000000000000000000000000000019",
      "91000000000000000000000000000000000000000000000000000000000019",
      "92111111111111111111111111111111111111111111111111111111111129",
      "99999999999999999999999999999999999999999999999999999999999999"
      }
  };


  //생성자
  Snake(int y, int x);
  Snake(int y, int x, int h, int w);

 //아이템 함수
  void SpawnItem(int stage_num); 
  void DelItem(int stage_num);
  bool GetItem(int f, int s);
  bool diffItem(int f, int s, int *gcnt, int *pcnt, int stage_num);
  bool UnableItem(int stage_num, int p1, int p2); 

  //snake 죽었는지 함수
  bool CrushBody(int stage_num);

  //gate 함수
  int DefineGate(int stage_num, int d, int gatey, int gatex);
  void SpawnGate(int stage_num, int h, int w);
  void DelGate(int stage_num, int h, int w);
  int GetGate(int stage_num, int f, int s); 
  int MoveGate(int stage_num, int d, int gate_idx);
  void UpdateSnake();
  
  //윈도우 함수
  void ShowWin(WINDOW* w1, int stage_num);
  void ShowSnake(int stage_num);
  bool Game(WINDOW* w1, Board b, int stage_num);
};
